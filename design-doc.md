# Design Document: 帰る口実を作れるアプリ

## 1. プロジェクト概要

### 目的
- 飲み会や社交的な集まりなどで「帰りづらい状況」に直面したユーザーが、自然に帰る口実を得られるモバイルアプリを提供する。
- **ターゲット**:
  - 社会人（特に若手社員、内向的な人）。
  - 仕事や家族を理由に帰りたいが言い出せない人。

---

## 2. 機能要件

### 2.1 MVP機能
1. **帰る理由の自動生成**
   - 静的なテンプレートをベースに、ユーザーが選んだテーマ（家族、仕事、健康）に応じて「自然な口実」を生成。
   - **例**: 「健康」テーマ→「少し頭痛がするので帰らせていただきます」。
   - **入力**: テーマの選択、カスタマイズ（オプション）。
   - **出力**: 即座に適切な口実を表示。

2. **フェイク通知機能**
   - 指定した時間に「家族」「上司」などからの通知を装うアラートを送信。
   - **タイプ**: SMS風通知、メール風通知、フェイク電話。
   - **カスタマイズ可能**:
     - 通知内容（例: 「明日の会議の確認をお願いします」）。
     - 発信者名（例: 上司、家族）。

3. **選択式シチュエーション分析（簡易版）**
   - ユーザーが「場の状況」を選ぶと、それに応じた帰る理由を生成。
   - **質問例**:
     - 「誰がいる？」（上司、友達、恋人）。
     - 「どんな目的？」（飲み会、仕事の会議、家族の集まり）。
   - **出力**:
     - 「上司＋飲み会」→「明日早朝の会議があるので、先に失礼します」。

---

### 2.2 拡張機能
1. **AIによる口実生成**
   - テンプレートを基にした生成から、GPTベースの自然言語生成に拡張。
   - **パーソナライズ**: 過去の利用データを基に、より個人に最適化された理由を提案。

2. **コミュニティ共有**
   - ユーザーが「成功した理由」を投稿・閲覧できる機能。
   - 投稿された理由をAIが学習し、テンプレートに組み込む。

3. **フェイク通話のリアルタイムスクリプト**
   - フェイク電話の際、ユーザーが話す内容をリアルタイムでサポート。
   - **例**: 「はい、今すぐ帰ります」と表示されるプロンプト。

---

## 3. ユーザーフロー

1. **アプリを開く**
   - 「テーマを選ぶ」「シチュエーションを選ぶ」画面が表示。

2. **シチュエーション分析（オプション）**
   - ユーザーが「場の状況」を選択。
   - テーマを選ぶだけでも進める。

3. **理由の提案**
   - 選択内容に基づきテンプレートから理由を生成。
   - ユーザーが編集・カスタマイズ可能。

4. **フェイク通知を設定**
   - 通知のタイプと時間を選ぶ。
   - 設定後、指定時間に通知が届く。

5. **実行・帰宅**
   - 提案された理由または通知を活用し、スムーズに帰宅。

---

## 4. 技術設計

### 4.1 フロントエンド
- **技術**: React Native（iOS/Android両対応）。
- **ライブラリ**: Expo（通知の統合が容易）。
- **UIツール**: Material-UI（シンプルで使いやすいコンポーネント）。

### 4.2 バックエンド
- **クラウドサービス**: Firebase（認証、データストレージ）。
- **通知API**:
  - iOS: UserNotifications Framework。
  - Android: Firebase Cloud Messaging（FCM）。

### 4.3 データストレージ
- **テンプレート管理**:
  - Firebase Firestore：動的テンプレートの更新を容易に。
- **ユーザー設定管理**:
  - SQLite（端末内データベース）。

---

## 5. ユーザーインターフェース設計

### 5.1 ホーム画面
- **要素**:
  - 「テーマ選択」（家族、仕事、健康）。
  - 「シチュエーション分析」（オプション）。
  - ボタン: 「理由を生成する」。

### 5.2 理由生成画面
- **要素**:
  - 提案された理由の表示。
  - カスタマイズエリア（テキスト編集）。
  - ボタン: 「通知を設定する」。

### 5.3 通知設定画面
- **要素**:
  - 通知タイプ（SMS、電話）。
  - 通知内容（カスタマイズ可能）。
  - 通知時間の設定。

---

## 6. 成功指標（KPI）

1. **利用頻度**
   - 1ユーザーあたり月3回以上の理由生成利用。

2. **通知設定率**
   - 理由生成後、50%以上のユーザーが通知を設定。

3. **継続率**
   - 初回利用者のうち1週間後もリテンション率70%。

---

## 7. 追加改善案

1. **ユーザーニーズに基づく柔軟なデザイン**
   - 初期ユーザーからのフィードバックを基に、UI/UXを改善。

2. **多言語対応**
   - 日本語以外のユーザーにも対応可能な言語テンプレートの実装。

3. **音声アシスタント**
   - 音声操作で理由生成や通知設定を行う機能。

---
